{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/2019-07-02-open-data-hub-monitoring/","result":{"data":{"markdownRemark":{"id":"1f7f1318-c478-5b63-aa62-db53b78c062d","excerpt":"Monitoring The Open Data Hub is a reference architecture running on OpenShift that incorporates a variety of open source projects to function as a ML-as-a…","html":"<h2>Monitoring</h2>\n<p>The Open Data Hub is a reference architecture running on OpenShift that incorporates a variety of open source projects to function as a ML-as-a-service platform. Given how many different pieces there are in the platform, it is very difficult for devops engineers to get a clear picture of the health of the system. Moreover, it is not possible to make an informed decision regarding hardware requests or SLA’s without understanding how your system is performing. We are addressing this problem by using Prometheus and Grafana as the monitoring solution for the Open Data Hub.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06a05e4be018ba058fbe205204826b93/3c492/cluster_metrics.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAC4jAAAuIwF4pT92AAABYUlEQVR42mWRS67bMAxFvYu+WB9LoiQqdhwnr0iATjrqoKPuoftfxCnkOAWKDg4o8vIjSkPNwrl14kH6j21T1lVRTdQa0ZbQbmt8+ZoQ8Twfd4Z1rjxvmXURtq2wLcJ1Fm5L4n6RF6twOQtLi8yaWNqLuds5s86ZKp5vz0+GyTmMdTyj8L02nPM467DG4Q6WVLjkssent24ddQo8tKFJOH2M3LetN7SM1vK7ZH7UiHiPt5Ye986SveeRA5tMiHW7FqzlizH8jJFfLdHihDl98LldGew4clYlThPGjGgplJwxpxMpBFqtTNYQvOMyzwTv6TVNlXOteDsiMZJFuK0rQ0+IfsK7vp7ZC8K+lqE/Rz+nEJGYiCHsMW/sfoGe64w9hhhu15WhNaWqUDVTilCqUA9KSXtcW95tbZmS0+6Xmg5daOdCyoFn/xSthXnRv+K7+U6Vo/gY+B6m/6KtkKQ3/Mof4InjRUVmFHkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Cluster Monitoring Dashboard\"\n        src=\"/static/06a05e4be018ba058fbe205204826b93/5a190/cluster_metrics.png\"\n        srcset=\"/static/06a05e4be018ba058fbe205204826b93/772e8/cluster_metrics.png 200w,\n/static/06a05e4be018ba058fbe205204826b93/e17e5/cluster_metrics.png 400w,\n/static/06a05e4be018ba058fbe205204826b93/5a190/cluster_metrics.png 800w,\n/static/06a05e4be018ba058fbe205204826b93/c1b63/cluster_metrics.png 1200w,\n/static/06a05e4be018ba058fbe205204826b93/3c492/cluster_metrics.png 1300w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Prometheus</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 115px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b9191029a9b5c20a32e1004eaf2ecd12/e907b/prometheus_logo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.13043478260869%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD20lEQVR42m1VS2glRRTtOI4fFFFxdCEyC0Ww61a/PIPxA5KFILrQvLrVnTfJGwRFBAMqBh0ZFwYX4saNC92IoKL4Ie7EzwjOSPwg4yKIMDoQxrzXVf1LzCSZxLxPv5Jb3W8myUxBUUX3rVP3nHP7tuOUwzjOkAmCfbRfOOxdowIQGuE9hfCbRmgpZH8rAT9oyd8Ma3C/Mc6QPVeeuWiYWecyWlWNj2vB/lqfqJhz9YpZm/B6qeTHMh+66xOe2apX+pnP+yGyr3WN3UVnvtgLStnR2hLsrbUJz9CBSEKX9qFgJ5eld28ioZNInkcIW6Fg+XrdM6nkGy3B/QLU2bc7M4R3OpPDRiPrxBKMQpYkkm/HyL+j95mEP2IJCxGyX84GnlGCdVLJ89WALnWDXaCxz5/eOlQxSkBPC+gRtVTy72MfZlMf5ihGI7wRSf7KsuTv/mdjWU8JyDOfm5WAr54p6TvNwL0xlXwpkZwAc42sS+CZz99uCnZPKOEpy0CyhxPJHsgkf4guLGKBJLHSZBI+tYCJz6dJfIWsSwEUeLbI8FF6v9wYvY7WpRq7Payz2ywjhHmKITYKoU/nUsm3deC6TiL5sTV74wUKWkC0NMVvKDSetRr/PjKy/8zYwasKvdkRK1GZRChYb6teMWkAM06EEBII3UQa/kuCIztpwYwzNKg3GsfHxi4vAN2pgjbrFOdYj1gmEj5xyNWIqCLQg7zfqJLIi38G7hU7S8ruS8AU2QvmcNVs1r1SJtazLJGdIED7sMxSKwlzGiELBX98VymUwFRmWrjfasFOKQFzgyxJ00jCjwQYk8NFluxcWPPuNM+M7A/HCwP2jmZw39UaqwdpHwl4sjSnTZRjZJ87qc+Pl6Z01q39/MTpR4YPrI5Xro+Ed7MOhg/snGpy5KYkcK9t1tzRZQmpZSZYh0xKJX/VyQLvpc3SsRChvxJQycCCFvCTRvh571TIfg0Fm898+McaWNZjLCFPJ/jdTjOo3JogpJEsatCWTcBH9ui3o4kUxkQIR4v6hW2inUj+1fmgBPnL7clhm2XxxbDXlYCGFu6Luya6M0rA8+E4qysBX1KGMUK+EvD2Ys0ddQa1ZkElfGZBBbSpdW3UK22N8FpYc2ciZEcUukebgk1nkn/Yn6qaZZ93YwldkiussWfP98ZBnVlnkX1MAYmEblxI0BgEDrqSRv7+StEQepnkeTjOp3d+URe6dZlpKNh0hJBSR9k8VMlbAj5IpIctwZ6IJcznjaqxfRJhQUn+4EVgl/oFLD4Gt2jBp0Nk32gBG2RUSmYhqFDARwqhdvq5O6681C/gf0psnXUy4ltjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Prometheus Logo\"\n        src=\"/static/b9191029a9b5c20a32e1004eaf2ecd12/e907b/prometheus_logo.png\"\n        srcset=\"/static/b9191029a9b5c20a32e1004eaf2ecd12/e907b/prometheus_logo.png 115w\"\n        sizes=\"(max-width: 115px) 100vw, 115px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://prometheus.io/\">Prometheus</a> is an open-source monitoring and alerting tool that was developed at SoundCloud to address the challenges posed by the micro-service oriented architecture they had developed. We were drawn to Prometheus as it offers scalability, easy configurability for targets and alerting, and is simple to run in a variety of different environments. This was especially important to us as any monitoring solution we use should be able to scale out to a large number of instances. In addition to scalably gathering metrics, Prometheus has a powerful query language (imaginatively called PromQL) that makes it easy for the layman to gain insight into the metrics via slicing and various transformations.</p>\n<h2>Grafana</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 115px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e29c3d79f9653ee277a30b1ce3049e3/e907b/grafana_logo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.69565217391303%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAC4jAAAuIwF4pT92AAAE0ElEQVR42pVUe2xTVRi/yMCwsXZd1/WxrrO7Xe9pR2YiCUFNnEbFPwz+IVlIbztWYGw+mHMsgCywhQAikclDXmPsmSGjiDDAKDgyxiSoWYIhi39M+WcICkLvXe/70X7m3q6l+Er8ki/3nPOd73d+93e+72DYf1ikCpsNGDbrjzeIXCpAjEZJ1K2tQ1XVbFi4cA5UVmbp3oY98bdkbVHfmPrqjs3WYtMhXyesLAcIl8N0EK1LgiZj/8tG2rAsmvQtZ4M+gSIJlQqgeCyIfo+SxEfUcuLFB0G0hCZRNx1ES1Kk0sk06XuFDqJdNIm6ogG0hQoRK+kAuilV+yEW9MXVGr/OEFYtAKivACVcDnwIKVBXAcoK/+BjgJNBj0Gs9t2D1QsAasrjiXA5aABitV/brAEKVIC4TgdQzzSJ9tMk0RsNED9xIZ+qSRENEMOPAU5U+edOB9FNmkRABZBAa04igQ/5gCaJvvvVyAuAzcqUY7LB8yRFEi9Nk2hMA6UDRD2WKS4X9PVpASpAKJpWco0fYiTalL4wzbFHoBnjWUwIHRFr/CK93IOnaT6s8T5P1xBxzdU1PmDC3lN6YmVllsZGGz+o9TijYWIpFS57kwqjZxIz65oxYeI8v5o4mj7pQYPHQNeX3ebf9gLzVhnwdfizOmAk+QfRurLN/DteFdb7Adb7E9JaAqg6zzW6vmyRXlq1bq/wrvdKOoFvwJ/j3/eAvM4DzHv4DY15ZEaOWCO+CVoRMI34GLMWb2Ya8G1sIz4JLQSITR7uYSP+mi5bM77zkYYb3bvUllKAzTgwG9w9qV+52+CxyC2lAvdBaVfmTU41OecxG9wR2OoBqcV9a7zOnh1r9vh1hrFW1/HENjcwm10SfOgGdovrkxSgstX9KtvqkoW2kqe0+Z06ezY0OedpY7bFZWdbS37VcoQ2d62ewO1wboc9JcDucCrMjmIF2kuA3V48kAIUdrleFncW37u1sdSoM+zA5swwzdJBtztPwkE3iDuL9T7H1IPO29LeIuB2O3hut0OO73MC1+6YhH5rTqrexD1Fv0h77GsyLymlL9deNAhdLmB3O75IXvdeW0g8ZGehrwjinY4496ldhU4HSIdtK1IsuX1Fi7n99gn+sG0ff8jWzB+xvaCDH7DMFw/af4ajDuAP2B4ye4sqkn3cYcG5Dmu70GWdlHutCbnbBnKv9b50zLogXcg9JXlch20Z22F9neopydPlOGZtgAE78J2FIpy2g3zCdi7ZBTNt9dvH1hzlRMENOFkI6mAhyIOW+1x//rLM7kjt5Qcs1fKgRRSPWxLyZxaR77fcEfstGx9tnBGbG8xfLETMinjKDMoZcyIxVABCxPy9cMq8VThtqhU/L1gnRvKH1bMFCfWMOQ7nC4A9WbBKO+ixfk/Vl3jOjMQhkywOmRLCkElSvjSpcCkf4GI+wNf5AN8kx9I5k6pcMIF41rQ+3e+RjEc3MjORhw2LYCQP1GFjHMaMIA8bOOmiQUiMGAGuanOjJF0yxLSYMmw8roONY3P++hphqQV2NNsuX50/JV3JvSuPGPqky3lPy6OGRdLI/Frxcm6Tei13Cn40ANw0gPptblh/2UeSNfmvBuPZ9ui4yfhPB8IPuYR8PeeC+l3OVzCBzc2MafYnCty2582BJsYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Grafana Logo\"\n        src=\"/static/6e29c3d79f9653ee277a30b1ce3049e3/e907b/grafana_logo.png\"\n        srcset=\"/static/6e29c3d79f9653ee277a30b1ce3049e3/e907b/grafana_logo.png 115w\"\n        sizes=\"(max-width: 115px) 100vw, 115px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The front end we are using to visualize these metrics is <a href=\"https://grafana.com/\">Grafana</a>. Grafana has robust integrations in place with data sources such as Prometheus, Elasticsearch, InfluxDB, and Graphite. It also has support for a variety of different types of visualizations both out of the box and through the <a href=\"https://grafana.com/docs/administration/cli/\">grafana-cli</a>. The Grafana community has a large number of dashboards available <a href=\"https://grafana.com/dashboards\">here</a> which can easily be imported into any running instance of Grafana.</p>\n<h2>Additional Configuration</h2>\n<p>The monitoring deployment is configured out of the box to scrape ODH spark metrics as well as all pod level metrics that are being exposed on default ports. These metrics can be used to create Grafana dashboards for a quick picture of the health of your system. If your system requires any additional configuration for the alerting or custom endpoints to scrape metrics from, all you need to do is modify the prometheus.yml config map in  prometheus-objects.yaml to add a custom job. A custom job could look something like the following.</p>\n<pre><code>- job_name: 'My Custom Kafka Metrics'\n         metrics_path: '/metrics'\n         scheme: http\n         static_configs:\n           - targets:\n             - http://my-custom-kafka-endpoint.com\n</code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a20d16a42c4e4ef06bca0940f4e648b2/3c492/kafka.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAC4jAAAuIwF4pT92AAABkklEQVR42nWQS4sTQRRG+1e4mDGpR1dVuqur388EFDLxgT9tEHeDiEKC4GYwE/yHZ+iOi3Hh4nDu/e63ulF5zBiODc2pIP+aEr6klKeM8djSn2qKH55wnzD3+mOz5NUpED4nFN893am6Zj8D+b0nqs+B9lzQXHLKX9lSqi4Z01PPcKkpHj3hIaE6Z9S/525J9RTIv6VUjxnNOdCdS+o/geLBE5mDQu8V8UFh9wr9RjFn8Z1cSD9awocU/8lhD9ebe6cxbyX2bt41ei+JD5r0fUY0pJLKSlon6RNF4ySNlfSpotsoRq/ovV48eUWXXPMuEeTG0IUWfSMRr1bs2i3RrrdsO7MwtTHb1rLrHLvBsm0NU+0WxtoyLjZMnWOoDcFvmKaJNHGsXt8y9B2RWK2ZkeurF9YC8XfXUuOMI1YaJQRaCmIpMErgtMCZGBvHaKUw1hF5K/Du/2QbSTG/JZM0QdIViqHSjJWmCYK6CEzjSOIsG+eIqtxRBkMZ7D9Ui82L2VJmluIFITU4Y7DGsLq5RSvJM68VAUqrDgjJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Kafka Dashboard\"\n        src=\"/static/a20d16a42c4e4ef06bca0940f4e648b2/5a190/kafka.png\"\n        srcset=\"/static/a20d16a42c4e4ef06bca0940f4e648b2/772e8/kafka.png 200w,\n/static/a20d16a42c4e4ef06bca0940f4e648b2/e17e5/kafka.png 400w,\n/static/a20d16a42c4e4ef06bca0940f4e648b2/5a190/kafka.png 800w,\n/static/a20d16a42c4e4ef06bca0940f4e648b2/c1b63/kafka.png 1200w,\n/static/a20d16a42c4e4ef06bca0940f4e648b2/3c492/kafka.png 1300w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Monitoring for the Data Hub","author":"aasthana","categories":"features, monitoring","preview":"The Open Data Hub community is happy to announce the addition of monitoring to the Open Data Hub via Prometheus and Grafana. This will make it much easier for IT departments and devops engineers to manage their deployments of the Open Data Hub.","date":"July 02, 2019"}}},"pageContext":{"id":"1f7f1318-c478-5b63-aa62-db53b78c062d"}},"staticQueryHashes":["2604506565"],"slicesMap":{}}